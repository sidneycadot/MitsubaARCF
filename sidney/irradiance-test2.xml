<?xml version='1.0' encoding='utf-8'?>

<scene version="0.5.0">

    <!--
    <include filename="axes.xml"/>
    <include filename="detector.xml"/>
    -->

    <integrator type="bdpt"/>

    <!--
    <sensor type="perspective">

        <float name="fov" value="45"/>

        <transform name="toWorld">
            #<lookat origin="0.60,+0.10,0.60" target="0,0,0" up="0,1,0"/>
            <lookat origin="1.60,+1.10,1.60" target="0,0,0" up="0,1,0"/>
        </transform>

        <sampler type="independent">
            <integer name="sampleCount" value="32"/>
        </sampler>

        <film type="hdrfilm">
            <boolean name="banner" value="false"/>
            <integer name="width" value="640"/>
            <integer name="height" value="480"/>
        </film>

    </sensor>
    -->

   <!-- diffuser -->
   <!--
   <shape type="rectangle">

        <bsdf type="diffuse">
            <texture name="reflectance" type="arcfshape">
                <!- note: given a fixed object,
                     the texture is moved in the direction (-uoffset, -voffset);
                     after that, the texture is scaled by (1/uscale, 1/vscale).
                     In other words, everything is in the least convenient order
                     when trying to move a texture in position...
                ->
                <float name="ubar" value="0.0"/>
                <float name="vbar" value="0.5"/>
                <float name="uoffset" value="-4"/>
                <float name="voffset" value="-2"/>
                <float name="uscale" value="8"/>
                <float name="vscale" value="4"/>
            </texture>
        </bsdf>

   </shape>
   -->

    <!-- default source -->
    <!--
    <emitter type="sunsky" />
    -->

    <!-- diffuser -->
    <!--
    <shape type="cube">

        <ref id="bsdf-white"/>

        <transform name="toWorld">
            <scale x="0.1" y="0.1" z="0.02"/>
            <translate z="-0.02" />
        </transform>

    </shape>
    -->

    <!-- monochromator light source -->
    <emitter type="directional">
        <vector name="direction" x="0" y="0" z="-1"/>
    </emitter>

    <!-- monochromator hole -->
    <!--
    <shape type="rectangle">

        <bsdf type="mask">

            <ref id="bsdf-white"/>

            <texture name="opacity" type="arcfshape">
                <float name="ubar" value="0.0"/>
                <float name="vbar" value="0.0"/>
                <float name="uoffset" value="-100.0"/>
                <float name="voffset" value="-100.0"/>
                <float name="uscale" value="200.00"/>
                <float name="vscale" value="200.00"/>
                <spectrum name="color0" value = "0"/>
                <spectrum name="color1" value = "1"/>
            </texture>

        </bsdf>

        <transform name="toWorld">
            <translate z="+2.0"/>
        </transform>

    </shape>
    -->

    <!-- floor -->

    <!--
    <shape type="rectangle">
        <bsdf type="diffuse">
            <texture type="checkerboard" name="reflectance">
                <float name="uvscale" value="5"/>
            </texture>
        </bsdf>
        <transform name="toWorld">
            <scale value="5"/>
            <rotate x="1" angle="-90"/>
            <translate y="-1"/>
        </transform>
    </shape>
    -->

    <!--
    <shape type="instance" id="the detector">
        <ref id="detector"/>
        <transform name="toWorld">
            <rotate y="1" angle="180"/>
            <translate z="0.400"/>
            <rotate y="1" angle="45"/>
        </transform>
    </shape>
    -->

    <shape type="rectangle">
        <sensor type="irradiancemeter">
            <film type="mfilm">
                <integer name="digits" value="20"/>
                <string name="fileFormat" value="matlab"/>
                <!--<boolean name="highQualityEdges" value="false"/>-->
                <!--<rfilter type="tent"/>-->
            </film>
            <sampler type="independent">
                <integer name="sampleCount" value="1048576"/>
            </sampler>
        </sensor>
        <transform name="toWorld">
            <scale value="1"/>
        </transform>
    </shape>

    <!--
    <shape type="instance">
        <ref id="axes"/>
        <transform name="toWorld">
            <scale value="1"/>
        </transform>
    </shape>
    -->

</scene>
