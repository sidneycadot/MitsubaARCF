<?xml version='1.0' encoding='utf-8'?>

<scene version="0.5.0">

    <!-- monochromator light source (Erik's area_source) -->

    <shape type="disk" id="monochromator_frontside">

        <emitter type="arcf_source">
            <spectrum name="irradiance" value="$monochromator.intensity" />
        </emitter>

        <!--
        <emitter type="area">
            <spectrum name="radiance" value="$monochromator.intensity" />
        </emitter>
        -->

        <transform name="toWorld">
            <scale value="$monochromator.radius"/>
            <!-- monochromator transform -->
            <rotate y="1" angle="180"/>
            <translate z="$monochromator.distance"/>
        </transform>

    </shape>

    <shape type="cylinder" id="monochromator cylinder">

        <point name="p0" x="0" y="0" z="0"/>
        <point name="p1" x="0" y="0" z="$monochromator.tube_length"/>
        <float name="radius" value="$monochromator.radius"/>

        <ref id="monochromator.outside-bsdf"/>

        <transform name="toWorld">
            <rotate y="1" angle="180"/>
            <!-- monochromator transform -->
            <rotate y="1" angle="180"/>
            <translate z="$monochromator.distance"/>
        </transform>

    </shape>

    <shape type="disk" id="monochromator_backside">

        <ref id="monochromator.outside-bsdf"/>

        <!--
        <emitter type="area">
            <spectrum name="radiance" value="1e3"/>
        </emitter>
        -->

        <transform name="toWorld">
            <scale value="$monochromator.radius"/>
            <translate z="$monochromator.tube_length"/>
            <!-- monochromator transform -->
            <translate z="$monochromator.distance"/>
        </transform>

    </shape>

</scene>
